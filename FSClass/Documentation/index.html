<html>
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <title>FSClass 3.0</title>
  <link rel="stylesheet" href="styles.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <link rel="stylesheet" href="textmate.css" type="text/css" media="screen" title="no title" charset="utf-8">
</head>

<body>

<h1>FSClass</h1>
<p>FSClass is a 'meta-class' that allows new classes to be created directly in <a href="http://www.fscript.org">F-Script</a> programs, using F-Script code to implement methods, without adding any new keywords or syntax to the language. Classes created in this manner are full-fledged Cocoa classes, and instances of them can be used like any other Cocoa object. The 3.0 release of FSClass features numerous new bug fixes, a completely redesigned internal architecture, better handling of Objective-C categories, and compatibility with OS X 10.5 Leopard and F-Script 2.0.</p>

<p><a href="http://pages.cs.wisc.edu/~weinrich/projects/FSClass/FSClass3_0.dmg">Download FSClass 3.0</a></p>
<p><a href="http://pages.cs.wisc.edu/~weinrich/projects/FSClass/FSClass2_0.dmg">Download FSClass 2.0 (for F-Script 1.x and Mac OS X 10.4 only)</a></p>

<p>Sections: <ol>
    <li><a target="_self" href="#introduction">Introduction</a></li>
    <li><a target="_self" href="#methods">Adding Methods</a></li>
    <li><a target="_self" href="#properties">Properties</a></li>
    <li><a target="_self" href="#fast-ivars">Fast Instance Properties</a></li>
    <li><a target="_self" href="#kvc">Key-Value Coding</a></li>
    <li><a target="_self" href="#constructors">Constructors</a></li>
    <li><a target="_self" href="#inheritance">Inheritance</a></li>
    <li><a target="_self" href="#super">Calling Superclass Methods</a></li>
    <li><a target="_self" href="#advancedinit">Advanced Initializers and Factory Methods</a></li>
    <li><a target="_self" href="#anonymous">Class Names and Anonymous Classes</a></li>
    <li><a target="_self" href="#class">Class Methods and Data</a></li>
    <li><a target="_self" href="#categories">Categories in F-Script</a></li>
    <li><a target="_self" href="#reflection">Reflection Methods</a></li>
    <li><a target="_self" href="#objectivec">Using FSClass objects in Objective-C</a></li>
    <li><a target="_self" href="#todo">Future Plans</a></li>
    <li><a target="_self" href="#reference">Reference</a></li>
    <li><a target="_self" href="#download">Download</a></li>
    <li><a target="_self" href="#legal">Legal and Miscellany</a></li>
    <li><a target="_self" href="#bugs">Known Bugs</a></li>
    <li><a target="_self" href="#revision">Revision History</a></li>
</ol></p>

<h2><a name="introduction"/>Introduction</h2>
<p>FSClass is a "meta-class" that allows programmers to create new classes directly in F-Script, instead of having to write them in Objective-C. Methods are implemented with F-Script <span class="class">Block</span>s, and data is stored as Cocoa-compliant Key-Value properties.</p>

<p>FSClass creates 100% real Cocoa classes; if you use FSClass to create a class 'Foobar', then <span class="class">Foobar</span> will be a fully legitimate class like <span class="class">NSObject</span> or <span class="class">NSString</span>. Method calling is very efficient: in most cases, the FSClass framework inserts only a handful of instructions between the invocation of the method in F-Script and the execution of the <span class="class">Block</span> that implements the method.</p>

<p>To create a class in F-Script, we first create a new "class object", then add properties and methods directly to it. Individual objects are created by asking the class object for a new instance. No additional syntax or keywords are necessary, so the core F-Script language is unaffected and classes can be created programmatically. This approach will be familiar to anyone who has created classes in JavaScript using prototyping:</p>

<style>
  td.lang {border-bottom:black solid 2px; font-weight:bold}
  td.javascript {border-right:solid black 2px; padding-right:10px; border-bottom:solid gray 1px}
  td.fscript {border-bottom:solid gray 1px}
</style>
<table style="margin-left:30px; border-collapse:collapse;">
  <tr><td class="lang">JavaScript</td><td class="lang">F-Script</td></tr>
<!-- Class creation row -->
<tr>
  <td class="javascript">
<pre class="textmate-source mac_classic"><span class="source source_js"><span class="comment comment_line comment_line_double-slash comment_line_double-slash_js"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_js">//</span> Declare the class and create a constructor
</span><span class="meta meta_function meta_function_js"><span class="storage storage_type storage_type_function storage_type_function_js">function</span> <span class="entity entity_name entity_name_function entity_name_function_js">Circle</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_js">(</span><span class="variable variable_parameter variable_parameter_function variable_parameter_function_js">r</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_end punctuation_definition_parameters_end_js">)</span></span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="variable variable_language variable_language_js">this</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius <span class="keyword keyword_operator keyword_operator_js">=</span> r<span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
</span></pre>
  </td><td class="fscript">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create the class<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Circle</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Circle<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
  </td>
</tr>
<!-- Properties creation row -->
<tr>
  <td class="javascript">
<pre class="textmate-source mac_classic"><span class="source source_js"><span class="comment comment_line comment_line_double-slash comment_line_double-slash_js"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_js">//</span> accessor methods for radius - 
</span><span class="comment comment_line comment_line_double-slash comment_line_double-slash_js"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_js">//</span>  not strictly necessary
</span><span class="meta meta_function meta_function_prototype meta_function_prototype_js"><span class="support support_class support_class_js">Circle</span>.<span class="support support_constant support_constant_js">prototype</span>.<span class="entity entity_name entity_name_function entity_name_function_js">setRadius</span> = <span class="storage storage_type storage_type_function storage_type_function_js">function</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_js">(</span><span class="variable variable_parameter variable_parameter_function variable_parameter_function_js">r</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_end punctuation_definition_parameters_end_js">)</span></span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="variable variable_language variable_language_js">this</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius <span class="keyword keyword_operator keyword_operator_js">=</span> r<span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>

<span class="meta meta_function meta_function_prototype meta_function_prototype_js"><span class="support support_class support_class_js">Circle</span>.<span class="support support_constant support_constant_js">prototype</span>.<span class="entity entity_name entity_name_function entity_name_function_js">getRadius</span> = <span class="storage storage_type storage_type_function storage_type_function_js">function</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_js">(</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_end punctuation_definition_parameters_end_js">)</span></span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="keyword keyword_control keyword_control_js">return</span> <span class="variable variable_language variable_language_js">this</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius<span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
</span></pre>
  </td><td class="fscript">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>add radius property - automatically generates
    accessor methods<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Circle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>radius<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
  </td>
</tr>
<!-- Constructor creation row -->
<tr>
  <td class="javascript">
    <pre>
    </pre>
  </td><td class="fscript">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create a class factory method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Circle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onClassMessage:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#circleWithRadius:</span>
    <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">do:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :radius</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">instance</span>|
        <span class="variable variable_declaration variable_declaration_fscript">instance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
        instance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setRadius:</span>radius<span class="punctuation punctuation_fscript">.</span>
        instance
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
  </td>
</tr>
<!-- Constant row -->
<tr>
  <td class="javascript">
    <pre>
    </pre>
  </td><td class="fscript">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Declare a constant<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Circle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addClassProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>pi<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withValue:</span><span class="constant constant_numeric constant_numeric_fscript">3.14159</span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
  </td>
</tr>
<!-- Instance Methods -->
<tr>
  <td class="javascript">
<pre class="textmate-source mac_classic"><span class="source source_js"><span class="comment comment_line comment_line_double-slash comment_line_double-slash_js"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_js">//</span> Geometry methods
</span><span class="meta meta_function meta_function_prototype meta_function_prototype_js"><span class="support support_class support_class_js">Circle</span>.<span class="support support_constant support_constant_js">prototype</span>.<span class="entity entity_name entity_name_function entity_name_function_js">area</span> = <span class="storage storage_type storage_type_function storage_type_function_js">function</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_js">(</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_end punctuation_definition_parameters_end_js">)</span></span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="keyword keyword_control keyword_control_js">return</span> <span class="support support_class support_class_js">Math</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span><span class="support support_constant support_constant_js">PI</span> <span class="keyword keyword_operator keyword_operator_js">*</span> <span class="variable variable_language variable_language_js">this</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius <span class="keyword keyword_operator keyword_operator_js">*</span> <span class="variable variable_language variable_language_js">this</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius<span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>

<span class="meta meta_function meta_function_prototype meta_function_prototype_js"><span class="support support_class support_class_js">Circle</span>.<span class="support support_constant support_constant_js">prototype</span>.<span class="entity entity_name entity_name_function entity_name_function_js">circumference</span> = <span class="storage storage_type storage_type_function storage_type_function_js">function</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_js">(</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_end punctuation_definition_parameters_end_js">)</span></span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="keyword keyword_control keyword_control_js">return</span> <span class="constant constant_numeric constant_numeric_js">2</span> <span class="keyword keyword_operator keyword_operator_js">*</span> <span class="support support_class support_class_js">Math</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>pi <span class="keyword keyword_operator keyword_operator_js">*</span> <span class="variable variable_language variable_language_js">this</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius<span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
</span></pre>
  </td><td class="fscript">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Geometry methods<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Circle</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">area</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> radius <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">raisedTo:</span><span class="constant constant_numeric constant_numeric_fscript">2</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="operator operator_fscript">*</span> <span class="storage storage_class storage_class_fscript">Circle</span> pi<span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Circle</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">circumference</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> radius <span class="operator operator_fscript">*</span> <span class="constant constant_numeric constant_numeric_fscript">2</span> <span class="operator operator_fscript">*</span> <span class="storage storage_class storage_class_fscript">Circle</span> pi<span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
  </td>
</tr>
<!-- Comparison methods row -->
<tr>
  <td class="javascript">
<pre class="textmate-source mac_classic"><span class="source source_js"><span class="comment comment_line comment_line_double-slash comment_line_double-slash_js"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_js">//</span> class method - compare circles based on size
</span><span class="meta meta_function meta_function_js"><span class="support support_class support_class_js">Circle</span>.<span class="entity entity_name entity_name_function entity_name_function_js">compare</span> = <span class="storage storage_type storage_type_function storage_type_function_js">function</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_js">(</span><span class="variable variable_parameter variable_parameter_function variable_parameter_function_js">circleA,circleB</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_end punctuation_definition_parameters_end_js">)</span></span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="keyword keyword_control keyword_control_js">return</span> circleA<span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>compareTo<span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span>circleB<span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>

<span class="comment comment_line comment_line_double-slash comment_line_double-slash_js"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_js">//</span> instance comparison method
</span><span class="meta meta_function meta_function_prototype meta_function_prototype_js"><span class="support support_class support_class_js">Circle</span>.<span class="support support_constant support_constant_js">prototype</span>.<span class="entity entity_name entity_name_function entity_name_function_js">compareTo</span> = <span class="storage storage_type storage_type_function storage_type_function_js">function</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_begin punctuation_definition_parameters_begin_js">(</span><span class="variable variable_parameter variable_parameter_function variable_parameter_function_js">circle</span><span class="punctuation punctuation_definition punctuation_definition_parameters punctuation_definition_parameters_end punctuation_definition_parameters_end_js">)</span></span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="keyword keyword_control keyword_control_js">if</span> <span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span><span class="variable variable_language variable_language_js">this</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius<span class="keyword keyword_operator keyword_operator_js">==</span>circle<span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius<span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
        <span class="keyword keyword_control keyword_control_js">return</span> <span class="constant constant_numeric constant_numeric_js">0</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
    <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span>
    <span class="keyword keyword_control keyword_control_js">else</span> <span class="keyword keyword_control keyword_control_js">if</span> <span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span><span class="variable variable_language variable_language_js">this</span><span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius<span class="keyword keyword_operator keyword_operator_js">&gt;</span>circle<span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>radius<span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
        <span class="keyword keyword_control keyword_control_js">return</span> <span class="keyword keyword_operator keyword_operator_js">-</span><span class="constant constant_numeric constant_numeric_js">1</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
    <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span>
    <span class="keyword keyword_control keyword_control_js">else</span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
        <span class="keyword keyword_control keyword_control_js">return</span> <span class="constant constant_numeric constant_numeric_js">1</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
    <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span></span></pre>
  </td><td class="fscript">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Comparison Method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Circle</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">compare:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :otherCircle</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> radius<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">compare:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>otherCircle radius<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
  </td>
</tr>
<!-- Use example row -->
<tr>
  <td class="javascript">
<pre class="textmate-source mac_classic"><span class="source source_js"><span class="comment comment_line comment_line_double-slash comment_line_double-slash_js"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_js">//</span> create and use a Circle
</span>circle1 <span class="keyword keyword_operator keyword_operator_js">=</span> <span class="meta meta_class meta_class_instance meta_class_instance_constructor"><span class="keyword keyword_operator keyword_operator_new keyword_operator_new_js">new</span> <span class="entity entity_name entity_name_type entity_name_type_instance entity_name_type_instance_js">Circle</span></span><span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span><span class="constant constant_numeric constant_numeric_js">5.0</span><span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
circle1<span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>setRadius<span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span><span class="constant constant_numeric constant_numeric_js">4.0</span><span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>

<span class="support support_function support_function_js">alert</span><span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span><span class="string string_quoted string_quoted_double string_quoted_double_js"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_js">"</span>Circle area is : <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_js">"</span></span> <span class="keyword keyword_operator keyword_operator_js">+</span> circle1<span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>area<span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>

circle2 <span class="keyword keyword_operator keyword_operator_js">=</span> <span class="meta meta_class meta_class_instance meta_class_instance_constructor"><span class="keyword keyword_operator keyword_operator_new keyword_operator_new_js">new</span> <span class="entity entity_name entity_name_type entity_name_type_instance entity_name_type_instance_js">Circle</span></span><span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span><span class="constant constant_numeric constant_numeric_js">5.0</span><span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>

<span class="keyword keyword_control keyword_control_js">if</span> <span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span>Circle<span class="meta meta_delimiter meta_delimiter_method meta_delimiter_method_period meta_delimiter_method_period_js">.</span>compare<span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span>circle1<span class="meta meta_delimiter meta_delimiter_object meta_delimiter_object_comma meta_delimiter_object_comma_js">,</span>circle2<span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span> <span class="keyword keyword_operator keyword_operator_js">&gt;</span> <span class="constant constant_numeric constant_numeric_js">0</span><span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="support support_function support_function_js">alert</span><span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span><span class="string string_quoted string_quoted_double string_quoted_double_js"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_js">"</span>circle2 is bigger than circle1<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_js">"</span></span><span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span>
<span class="keyword keyword_control keyword_control_js">else</span> <span class="meta meta_brace meta_brace_curly meta_brace_curly_js">{</span>
    <span class="support support_function support_function_js">alert</span><span class="meta meta_brace meta_brace_round meta_brace_round_js">(</span><span class="string string_quoted string_quoted_double string_quoted_double_js"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_js">"</span>circle2 is bigger than circle1<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_js">"</span></span><span class="meta meta_brace meta_brace_round meta_brace_round_js">)</span><span class="punctuation punctuation_terminator punctuation_terminator_statement punctuation_terminator_statement_js">;</span>
<span class="meta meta_brace meta_brace_curly meta_brace_curly_js">}</span>
</span></pre>
  </td><td class="fscript">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>create and use a Circle<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">circle1</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">Circle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">circleWithRadius:</span><span class="constant constant_numeric constant_numeric_fscript">5.0</span><span class="punctuation punctuation_fscript">.</span>
circle1 <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setRadius:</span><span class="constant constant_numeric constant_numeric_fscript">4.0</span><span class="punctuation punctuation_fscript">.</span>

<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Circle area is: <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>circle1 area description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>

<span class="variable variable_declaration variable_declaration_fscript">circle2</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">Circle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">circleWithRadius:</span><span class="constant constant_numeric constant_numeric_fscript">5.0</span><span class="punctuation punctuation_fscript">.</span>

<span class="punctuation punctuation_pairing punctuation_pairing_fscript">((</span>circle1 <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">compare:</span>circle2<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">NSOrderedAscending</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">ifTrue:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>circle2 is bigger than circle1<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span>
<span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">ifFalse:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>circle1 is bigger than circle2<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
  </td>
</tr>

</table>

<p>Note the following differences:</p>
<ul>
    <li>In the JavaScript example, the get/set methods for the radius variable are not necessary, because variables can be directly accessed, i.e. <code>circle = new Circle(); circle.radius = 5;</code>. But in F-Script, we have to use methods, which <span class="method">addProperty:</span> creates for us.</li>
    <li><code>this</code> is a special keyword in JavaScript, but in F-Script, <code>self</code> is explicitly declared as the first parameter, even though it does not have a slot (i.e. a semicolon) in the message name. Explicit "self" parameters are used the same way in Perl and Python.</li>
    <li>Instead of a constructor method, we declare a class method <span class="method">circleWithRadius:</span> that returns a new circle, like the <span class="class">NSNumber</span> methods <span class="method">numberWithInt:</span> or <span class="method">numberWithDouble:</span>. Inside the factory method code, we use the regular Cocoa methods <span class="method">alloc init</span> to actually create the object. The factory method must explicitly return <code>instance</code>.</li>
    <li>We declare <code>pi</code> as a class property of <span class="class">Circle</span>, which lets us work around Objective-C's lack of namespace support.</li>
    <li>When adding methods to a class, we use the compact block form (e.g. <code>#doMethod:withArg:</code>) to specify the method's selector.</li>
</ul>

<h2><a name="example"/>Methods</h2>
<p>Here is an example of how to add methods to a class with FSClass:</p>

<!--
  Greeter := FSClass newClass:'Greeter'.

  Greeter addProperty:'defaultGreeting'.

  "factory creation method. sets a default greeting"
  Greeter onClassMessage:#greeter do:[ :self | |instance|
      instance := self alloc init.
      instance setDefaultGreeting:'Hi there!'.
      instance
  ].

  Greeter onMessage:#sayHello do:[ :self |
      sys log:'Hello!'.
  ].

  Greeter onMessage:#sayDefaultGreeting do:[ :self |
      sys log:(self defaultGreeting).
  ].

  Greeter onMessage:#sayGreeting: do:[ :self :greeting |
      sys log:greeting.
  ].


  "Create a Greeter by using the class factory method"
  myGreeter := Greeter greeter.

  "Print 'Hello!'"
  myGreeter sayHello.

  "Print 'Hi there!'"
  myGreeter sayDefaultGreeting.


  "Print 'Bonjour!'"
  myGreeter sayGreeting:'Bonjour!'.


  "Save default greeting and print 'Good Morning!'"
  defaultGreeting := myGreeter defaultGreeting.
  myGreeter setDefaultGreeting:'Good Morning!'.
  myGreeter sayDefaultGreeting.

  "Print 'Hi there!'"
  myGreeter sayGreeting:defaultGreeting.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">Greeter</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Greeter<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="storage storage_class storage_class_fscript">Greeter</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>defaultGreeting<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>factory creation method. sets a default greeting<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Greeter</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">greeter</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">instance</span>|
    <span class="variable variable_declaration variable_declaration_fscript">instance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
    instance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setDefaultGreeting:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Hi there!<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
    instance
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Greeter</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">sayHello</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Hello!<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Greeter</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">sayDefaultGreeting</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> defaultGreeting<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Greeter</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">sayGreeting:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :greeting</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span>greeting<span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create a Greeter by using the class factory method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">myGreeter</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">Greeter</span> greeter<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Print 'Hello!'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
myGreeter sayHello<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Print 'Hi there!'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
myGreeter sayDefaultGreeting<span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Print 'Bonjour!'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
myGreeter <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">sayGreeting:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Bonjour!<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Save default greeting and print 'Good Morning!'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">defaultGreeting</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> myGreeter defaultGreeting<span class="punctuation punctuation_fscript">.</span>
myGreeter <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setDefaultGreeting:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Good Morning!<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
myGreeter sayDefaultGreeting<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Print 'Hi there!'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
myGreeter <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">sayGreeting:</span>defaultGreeting<span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>Blocks supplied as method implementations must take <span class="parameter">:self</span> as an explicit first parameter, in the same way that methods are written in Perl and Python. In the case of class methods, <span class="parameter">:self</span> will be the class object, just as in Objective-C. All following parameters should correspond to the slots for arguments in the selector. In the above example, the <span class="method">sayGreeting:</span> message only has a slot for one argument (as it has only one colon), but the block supplied for it must take two parameters. <code>self</code> is only the customary name for the receiver parameter; you may use any name you like.</p>

<p>The method <span class="method">onMessageName:do:</span> can be used when you have a string that represents a selector's name. This method lets you defer not only the implementation, but the actual name of the method until runtime. The section <a target="_self" href="#anonymous">Class Names and Anonymous Classes</a> shows how this method can be used to create custom classes at runtime.</p>


<h2><a name="properties"/>Properties</h2>
<p>Instance data for F-Script objects are always hidden behind accessor/mutator methods. You create a property by adding it to an existing class object. Instances can then use the Cocoa-style methods <span class="method">propertyName</span> and <span class="method">setPropertyName:</span> to access it:</p>

<!--
  NewClass := FSClass newClass.

  NewClass addProperty:'foobar'.

  "Use array messaging to add multiple properties at once"
  NewClass addProperty: @ { 'propA', 'propB', 'propC' }.


  inst := NewClass alloc init.

  inst setFoobar:5.

  "Logs '5' to the console"
  sys log:(inst foobar).
-->
<div class="longexample"><pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">NewClass</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> newClass<span class="punctuation punctuation_fscript">.</span>

<span class="storage storage_class storage_class_fscript">NewClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>foobar<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Use array messaging to add multiple properties at once<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">NewClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span> <span class="operator operator_access operator_access_fscript">@</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">{</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propA<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">,</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propB<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">,</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propC<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">}</span><span class="punctuation punctuation_fscript">.</span>


<span class="variable variable_declaration variable_declaration_fscript">inst</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">NewClass</span> alloc init<span class="punctuation punctuation_fscript">.</span>

inst <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setFoobar:</span><span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Logs '5' to the console<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>inst foobar<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span></pre></div>

<p>Objective-C 2.0 uses the term "property" to refer to an instance variable declared in a specific way, with special attributes and a new access syntax. Properties created in F-Script are different; creating a property for an F-Script class only allocates space in the object and creates the accessor/mutator method pair. There is no special syntax, and none of the Objective-C 2.0 attributes (such as <tt>copy</tt> or <tt>readonly</tt>) can be applied.</p>

<p>The methods <span class="method">addProperty:withDefault:</span>, <span class="method">addPropertiesWithDefaults:</span>, and <span class="method">addPropertiesFromDictionary:</span> allow you to specify default values that will be automatically filled in by <span class="method">alloc</span>. These default values <em>must</em> be immutable, as they will initially be shared between all instances of a class (and subclasses) until they are replaced. For more information, see the <a href="reference.html">FSClass reference</a>.</p>

<p>As with most scripting languages, there is no support for access control: all properties are public, which may be a problem when you want to have greater control over the behavior of method accessors and mutators, such as the <tt>readonly</tt> and <tt>copy</tt> attributes available on Objective-C 2.0 properties. In this case, you can create a 'private' instance property (typically prefixed with an underscore), and then create a pair of <span class="method">publicProperty</span> / <span class="method">setPublicProperty:</span> methods that access the 'private' property indirectly. The following example shows how to create a property that performs filtering in the set method. This design pattern has the added advantage that <code>publicProp</code> will work properly with <a href="#kvc">Key-Value Coding</a>:</p>

<!--
  PrivatePropertyClass := FSClass newClass:'PrivatePropertyClass'.

  "Add a 'private' property that isn't part of the published interface"
  PrivatePropertyClass addProperty:'_privateProperty'.
  PrivatePropertyClass addProperty:'_copiedProperty'.
  PrivatePropertyClass addProperty:'_readOnlyProperty'.


  "Add a pair of accessor/mutator methods that perform validation"
  "Acts like the @dynamic directive in Objective-C 2.0"
  PrivatePropertyClass onMessage:#publicProperty do:[ :self |
      self _privateProperty
  ].
  PrivatePropertyClass onMessage:#setPublicProperty: do:[ :self :newValue |
      "Throw an exception if the new value is not a number between 0 and 10"
      (newValue isKindOfClass:(NSNumber class)) ifFalse:[
          'publicProperty must be a number' throw.
      ].
      ((newValue < 0) | (newValue > 10)) ifTrue:[
          'publicProperty must be a number between 0 and 10 inclusive' throw.
      ].

      self set_privateProperty:newValue.
  ].


  "This accessor-mutator pair will copy the value passed to the mutator"
  "Acts like the (copy) attribute in Objective-C 2.0"
  PrivatePropertyClass onMessage:#otherProperty do:[ :self |
      self _copiedProperty
  ].
  PrivatePropertyClass onMessage:#setOtherProperty: do:[ :self :newValue |
      self set_copiedProperty:(newValue copyWithZone:nil).
  ].


  "This logical property does not have a mutator"
  "Acts like the (readonly) attribute in Objective-C 2.0)"
  PrivatePropertyClass onMessage:#readOnlyProperty do:[ :self |
    self _readOnlyProperty
  ].
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>PrivatePropertyClass<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Add a 'private' property that isn't part of the published interface<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>_privateProperty<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>_copiedProperty<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>_readOnlyProperty<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Add a pair of accessor/mutator methods that perform validation<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Acts like the @dynamic directive in Objective-C 2.0<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">publicProperty</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> _privateProperty
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">setPublicProperty:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :newValue</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Throw an exception if the new value is not a number between 0 and 10<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>newValue <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">isKindOfClass:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="support support_class support_class_cocoa">NSNumber</span> class<span class="punctuation punctuation_pairing punctuation_pairing_fscript">))</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">ifFalse:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">        </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>publicProperty must be a number<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> throw<span class="punctuation punctuation_fscript">.</span>
    </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
    <span class="punctuation punctuation_pairing punctuation_pairing_fscript">((</span>newValue <span class="operator operator_fscript">&lt;</span> <span class="constant constant_numeric constant_numeric_fscript">0</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="operator operator_fscript">|</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>newValue <span class="operator operator_fscript">&gt;</span> <span class="constant constant_numeric constant_numeric_fscript">10</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">))</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">ifTrue:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">        </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>publicProperty must be a number between 0 and 10 inclusive<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> throw<span class="punctuation punctuation_fscript">.</span>
    </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

    <span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">set_privateProperty:</span>newValue<span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This accessor-mutator pair will copy the value passed to the mutator<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Acts like the (copy) attribute in Objective-C 2.0<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">otherProperty</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> _copiedProperty
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">setOtherProperty:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :newValue</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">set_copiedProperty:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>newValue <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">copyWithZone:</span><span class="constant constant_language constant_language_fscript">nil</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This logical property does not have a mutator<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Acts like the (readonly) attribute in Objective-C 2.0)<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">PrivatePropertyClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">readOnlyProperty</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">  </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> _readOnlyProperty
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>




<h2><a name="fast-ivars"/>Fast Instance Properties</h2>
<p>When you create a class in Objective-C, the instance variables are packed into a C-like structure that makes property access very fast. In 64-bit applications, the property access is slightly slower, but has the advantage that adding ivars to parent classes will not break child classes.</p>

<p>Objects of FSClass-created classes are different, in that they store all of their properties in a dictionary, similar to objects in other scripting languages like Perl and Ruby. This makes them much more flexible, as you can add properties to a class after it has been created. However, it introduces significant overhead to accessing the properties: every call to <code>myObj foo</code> requires the FSClass runtime to convert the message name to a string, look up that key in an NSDictionary, and possibly convert the value before returning it.</p>

<p>FSClass 2.1 introduced an optional solution to this problem with 'fast-ivar' classes. If you know the names of all instance properties at the time of class creation, you can specify them in the call to <span class="method">newClass:</span></p>

<!--
  FastIvarClass := FSClass newClass:'FastIvarClass' properties:{'propA', 'propB', 'propC'}.

  myFastInstance := FastIvarClass alloc init.

  myFastInstance setPropA:5.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">FastIvarClass</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>FastIvarClass<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">properties:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">{</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propA<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">,</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propB<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">,</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propC<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">}</span><span class="punctuation punctuation_fscript">.</span>

<span class="variable variable_declaration variable_declaration_fscript">myFastInstance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">FastIvarClass</span> alloc init<span class="punctuation punctuation_fscript">.</span>

myFastInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setPropA:</span><span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>Instances of <code>FastIvarClass</code> will have their member variables stored directly inside the object, just like Objective-C objects. The accessor methods for these properties will look directly in the object for the values; this reduces the access and mutation overhead to a fraction of their normal costs. Otherwise, instances of FastIvarClass will work exactly as instances of regular FSClasses.</p>

<p>Default values can be added after class creation using the method <span class="method">setDefaultValue:forProperty:</span>. Alternately, property names and defaults can be specified at class creation by passing a dictionary to the method <code>FSClass newClass:name propertiesWithDefaults:propsDictionary</code>. Attempting to add properties to a fast-ivar class with the methods <span class="method">-addProperty:</span> or <span class="method">-addProperty:withDefault:</span> will throw exceptions.</p>

<p>Using fast-ivar classes has an additional debugging benefit: fast ivars will show up in tools that list member variables, like object browsers or XCode's gdb interface.</p>

<p>Regular and fast-ivar classes can be mixed through inheritance: if a fast-ivar class inherits from a regular class, the parent class's properties will stay in the dictionary, but the child's properties will be accessed directly.</p>

<!--
<p><strong>Note:</strong> As of FSClass 2.1, fast-ivar classes are not compatible with the standalone GUI F-Script interpreter (the one included with the F-Script binary distribution). If you want to use fast-ivar classes, you can run your script in the <a href="http://pages.cs.wisc.edu/~weinrich/projects/fscript/index.html">command-line interpreter</a>.</p>
-->

<h2><a name="kvc"/>Key-Value Coding</h2>
<p>FSClass properties are Key-Value Coding compliant, so they can also be accessed with the indirect KVC methods:</p>

<!--
  KVTestClassA := FSClass newClass:'KVTestClassA'.
  KVTestClassA addProperty:'propA'.

  KVTestClassB := FSClass newClass:'KVTestClassB'.
  KVTestClassB addProperty:'propB'.

  kvInstance := KVTestClassA alloc init.

  "These two lines are equivalent:"
  kvInstance setPropA:5.
  kvInstance setValue:5 forKey:'propA'.

  "These two lines are equivalent:"
  sys log:(kvInstance propA).
  sys log:(kvInstance valueForKey:'propA').



  "We can also do key paths"
  subValue := KVTestClassB alloc init.

  kvInstance setPropA:subValue.

  "These two lines are equivalent:"
  kvInstance propA setPropB:10.
  kvInstance setValue:10 forKeyPath:'propA.propB'.

  "These two lines are equivalent:"
  sys log:(kvInstance propA propB).
  sys log:(kvInstance valueForKeyPath:'propA.propB').

  "This line will result in a runtime violation because the method is not defined:"
  [ kvInstance setFoo:'a string' ]
  onException:[ :e |
      sys log:('Caught an exception: ' ++ e description).
  ].

  "This line will result in a call to valueForUndefinedKey:,
      which will then throw an NSUnknownKeyException"
  [ kvInstance setValue:'a string' forKey:'foo' ]
  onException:[ :e |
      sys log:('Caught an exception: ' ++ e description).
  ].
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">KVTestClassA</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>KVTestClassA<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="storage storage_class storage_class_fscript">KVTestClassA</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propA<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="storage storage_class storage_class_fscript">KVTestClassB</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>KVTestClassB<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="storage storage_class storage_class_fscript">KVTestClassB</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propB<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="variable variable_declaration variable_declaration_fscript">kvInstance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">KVTestClassA</span> alloc init<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>These two lines are equivalent:<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
kvInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setPropA:</span><span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>
kvInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setValue:</span><span class="constant constant_numeric constant_numeric_fscript">5</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">forKey:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propA<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>These two lines are equivalent:<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>kvInstance propA<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>kvInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">valueForKey:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propA<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>



<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>We can also do key paths<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">subValue</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">KVTestClassB</span> alloc init<span class="punctuation punctuation_fscript">.</span>

kvInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setPropA:</span>subValue<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>These two lines are equivalent:<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
kvInstance propA <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setPropB:</span><span class="constant constant_numeric constant_numeric_fscript">10</span><span class="punctuation punctuation_fscript">.</span>
kvInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setValue:</span><span class="constant constant_numeric constant_numeric_fscript">10</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">forKeyPath:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propA.propB<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>These two lines are equivalent:<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>kvInstance propA propB<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>kvInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">valueForKeyPath:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propA.propB<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This line will result in a runtime violation because the method is not defined:<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">kvInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setFoo:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>a string<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span>
<span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onException:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:e</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Caught an exception: <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> e description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This line will result in a call to valueForUndefinedKey:,
    which will then throw an NSUnknownKeyException<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">kvInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setValue:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>a string<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">forKey:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>foo<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span>
<span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onException:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:e</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Caught an exception: <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> e description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>To maintain Key-Value Coding compliance, property names should follow the KVC guidelines. Other forms of key-value codings - such as one-to many relationships - can be implemented by defining the proper methods, as in Objective-C. See Apple's <a href="http://developer.apple.com/documentation/Cocoa/Conceptual/KeyValueCoding/index.html">Key-Value Coding Programming Guide</a> for more details.</p>





<h2><a name="constructors"/>Constructors</h2>
<p>As shown above, once a new class has been created, instances should be created by calling factory methods:</p>

<!--
  ExampleClass := FSClass newClass:'MyClass'.

  "add properties and methods to ExampleClass"
  "..."

  ExampleClass onClassMessage:#newExample do:[ :self | |instance|
      "Physically instantiate the object using regular alloc init"
      "FSClass 3.0 uses garbage collection, so autorelease is no longer necessary"
      instance := self alloc init.

      "Perform any necessary setup"
      "..."

      "Return the new instance"
      instance
  ].


  "Create a new instance"
  myInstance := ExampleClass newExample.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">ExampleClass</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>MyClass<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>add properties and methods to ExampleClass<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>...<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">ExampleClass</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">newExample</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">instance</span>|
    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Physically instantiate the object using regular alloc init<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>FSClass 3.0 uses garbage collection, so autorelease is no longer necessary<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="variable variable_declaration variable_declaration_fscript">instance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>

    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Perform any necessary setup<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>...<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>

    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Return the new instance<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    instance
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create a new instance<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">myInstance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">ExampleClass</span> newExample<span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>To create a new object, use the standard Cocoa methods <span class="method">alloc init</span>. FSClass 3.0 uses the garbage collection system introduced in Leopard and supported by F-Script 2.0, so <span class="method">autorelease</span> is no longer necessary.</p>

<p>If you are implementing a subclass, instantiation becomes a little bit more complicated; see the sections <a href="#inheritance">Inheritance</a> and <a href="#super">Calling Superclass Methods</a> for more information.<!-- If no superclass is specified, the <span class="method">-[NSObject init]</span> method will be called automatically, so no explicit <code>super init</code> code is necessary.--></p>

<p>Classes can have multiple factory methods that use some default and some specified property values. Here are example default and specific factories written in F-Script:</p>

<!--
  ExampleClass := FSClass newClass:'ExampleClass'.

  "Set the default name and property as class data"
  ExampleClass addClassProperty:'defaultName' withValue:'default name'.
  ExampleClass addClassProperty:'defaultPropertyOne' withValue:5.

  "Instance variables"
  ExampleClass addProperty:'propertyOne'.
  ExampleClass addProperty:'name'.

  "Default factory method"
  ExampleClass onClassMessage:#example do:[ :self | |instance|
      "Set up initial property values"
      instance := self alloc init.
      instance setName:(self defaultName).
      instance setPropertyOne:(self defaultPropertyOne).
      instance
  ].

  "Partially specified, partially default factory method"
  ExampleClass onMessage:#exampleWithName: do:[ :self :name | |instance|
      instance := self alloc init.
      instance setName:name.
      instance setPropertyOne:(self defaultPropertyOne).
      instance
  ].

  "Fully-specified factory method"
  ExampleClass onMessage:#exampleWithName:propertyOne: do:[ :self :name :propertyOne | |instance|
      instance := self alloc init.
      instance setName:name.
      instance setPropertyOne:propertyOne.
      instance
  ].
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">ExampleClass</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>ExampleClass<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Set the default name and property as class data<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">ExampleClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addClassProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>defaultName<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withValue:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>default name<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="storage storage_class storage_class_fscript">ExampleClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addClassProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>defaultPropertyOne<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withValue:</span><span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Instance variables<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">ExampleClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>propertyOne<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="storage storage_class storage_class_fscript">ExampleClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>name<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Default factory method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">ExampleClass</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">example</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">instance</span>|
    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Set up initial property values<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="variable variable_declaration variable_declaration_fscript">instance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
    instance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setName:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> defaultName<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
    instance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setPropertyOne:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> defaultPropertyOne<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
    instance
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Partially specified, partially default factory method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">ExampleClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">exampleWithName:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :name</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">instance</span>|
    <span class="variable variable_declaration variable_declaration_fscript">instance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
    instance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setName:</span>name<span class="punctuation punctuation_fscript">.</span>
    instance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setPropertyOne:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> defaultPropertyOne<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
    instance
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Fully-specified factory method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">ExampleClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">exampleWithName:propertyOne:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :name :propertyOne</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">instance</span>|
    <span class="variable variable_declaration variable_declaration_fscript">instance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
    instance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setName:</span>name<span class="punctuation punctuation_fscript">.</span>
    instance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setPropertyOne:</span>propertyOne<span class="punctuation punctuation_fscript">.</span>
    instance
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>





<h2><a name="inheritance"/>Inheritance</h2>
<p>Subclasses are created with the method <span class="method">newClass:parent:</span>, which takes an as its argument an <span class="class">FSClass</span> object or an Objective-C class object like <span class="class">NSMutableDictionary</span>. You can also use <span class="method">subclass:</span> to get a subclass directly from the parent. All methods (and, in the case of FSClass parents, properties with default values) are inherited from the superclass. To override a method implemented by a superclass, simply call <span class="method">onMessage:do:</span> with the same selector and a different block:</p>

<!--
  Car := FSClass newClass:'Car'.

  Car addProperty:'speed' withDefault:0.

  Car onClassMessage:#car do:[ :self |
      "The class's only property has a default, so we can just return a new instance"
      "+alloc will take care of setting the property defaults; -init will call the NSObject init method"
      self alloc init.
  ].

  Car onMessage:#drive do:[ :self |
      set setSpeed:50.
  ].

  Car onMessage:#park do:[ :self |
      self setSpeed:0.
  ].

  "Create a faster subclass of Car"
  SportsCar := FSClass newClass:'SportsCar' parent:Car.

  "Equivalent command to create a subclass would be:
      SportsCar := Car subclass:'SportsCar'.
  "

  SportsCar onClassMessage:#sportsCar do:[ :self |
      self alloc init
  ].


  "Override drive to go faster"
  SportsCar onMessage:#drive do:[ :self |
      self setSpeed:80.
  ].

  "No need to override park"
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">Car</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Car<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="storage storage_class storage_class_fscript">Car</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>speed<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withDefault:</span><span class="constant constant_numeric constant_numeric_fscript">0</span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Car</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">car</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>The class's only property has a default, so we can just return a new instance<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>+alloc will take care of setting the property defaults; -init will call the NSObject init method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Car</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">drive</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript">set <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setSpeed:</span><span class="constant constant_numeric constant_numeric_fscript">50</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Car</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">park</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setSpeed:</span><span class="constant constant_numeric constant_numeric_fscript">0</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create a faster subclass of Car<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">SportsCar</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>SportsCar<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">parent:</span><span class="storage storage_class storage_class_fscript">Car</span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Equivalent command to create a subclass would be:
    SportsCar := Car subclass:'SportsCar'.
<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SportsCar</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">sportsCar</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> alloc init
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Override drive to go faster<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SportsCar</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">drive</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setSpeed:</span><span class="constant constant_numeric constant_numeric_fscript">80</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>No need to override park<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
</span></pre>
</div>

<p>Properties are also inherited by subclasses. Unlike with compiled classes like Java or C++, classes at different levels of an inheritance hierarchy cannot have properties with the same name. This is because all properties in F-Script are accessed through methods, and all methods are inherited. If you try to add a property to a subclass that conflicts with a property already declared in a superclass, it will throw an exception; the reverse is not true. In short, if class Child with property <tt>bar</tt> inherits from Parent with property <tt>foo</tt>, <code>Parent addProperty:'bar'</code> will work, but <code>Child addProperty:'foo'</code> will not.</p>

<p>An important point is that methods and properties can be added to a class at any time, and all subclasses will immediately inherit them (with the exception that <a href="#fast-ivars">fast-ivar classes</a> cannot add new properties after class creation). Existing instances of the class or subclass will also be able to use the methods immediately. Continuing the example above:</p>

<!--
  ferrari := SportsCar sportsCar.

  "Will throw an exception - refuel: isn't defined"
  "ferrari refuel:15."

  "We can add a new property and new method here"
  Car addProperty:'fuel' withDefault:0.
  Car onMessage:#refuel: do:[ :self :gallons |
      self setFuel:(self fuel + gallons).
  ].

  "Now it is okay to refuel"
  ferrari refuel:15.

  "Will print '15'"
  sys log:(ferrari fuel).

-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="variable variable_declaration variable_declaration_fscript">ferrari</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">SportsCar</span> sportsCar<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Will throw an exception - refuel: isn't defined<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>ferrari refuel:15.<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>We can add a new property and new method here<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Car</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>fuel<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withDefault:</span><span class="constant constant_numeric constant_numeric_fscript">0</span><span class="punctuation punctuation_fscript">.</span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Car</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">refuel:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :gallons</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setFuel:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> fuel <span class="operator operator_fscript">+</span> gallons<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Now it is okay to refuel<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
ferrari <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">refuel:</span><span class="constant constant_numeric constant_numeric_fscript">15</span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Will print '15'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>ferrari fuel<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>The default value will be propagated to existing instances on first access. Likewise, if <span class="method">onMessage:do:</span> is used on a superclass to overwrite an existing method, all instances of that class (and subclasses) will automatically switch over to the new behavior.</p>

<p>Objective-C classes can be also be used as parents. For example, the FSClass bundle includes <span class="class">TestBaseClass</span>, which can be used to demonstrate inheritance from a compiled base class:</p>

<!--
  "TestBaseClass is a simple class included in the FSClass bundle"
  ClassM := FSClass newClass:'ClassM' parent:TestBaseClass.
  ClassM addProperty:'blort'.
  ClassM onMessage:#init do:[ :self | |newSelf|
      self doSuperMethod:#init currentClass:ClassM; setStr:'Hello world!'; setInteger:8; setBlort:'blort!'.
      self.
  ].
  ClassM onMessage:#borkedString do:[ :self |
      'bork! ' ++ self str
  ].
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>TestBaseClass is a simple class included in the FSClass bundle<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">ClassM</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>ClassM<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">parent:</span><span class="storage storage_class storage_class_fscript">TestBaseClass</span><span class="punctuation punctuation_fscript">.</span>
<span class="storage storage_class storage_class_fscript">ClassM</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>blort<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">ClassM</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">init</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">newSelf</span>|
    <span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#init</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">ClassM</span>; <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setStr:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Hello world!<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span>; <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setInteger:</span><span class="constant constant_numeric constant_numeric_fscript">8</span>; <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setBlort:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>blort!<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
    <span class="constant constant_language constant_language_fscript">self</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">ClassM</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">borkedString</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>bork! <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="constant constant_language constant_language_fscript">self</span> str
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre></div>

<p><code>str</code> is a property inherited from <span class="class">TestBaseClass</span>. Because all access to properties in F-Script is through methods, a superclass property that does not have an accessor method will not be useable from F-Script subclasses.</p>

<p><span class="method">doSuperMethod:currentClass:</span> is a special method used for accessing superclass methods; it works with Objective-C parents just as with FSClass parents. See the next section for more details, with an important note about using superclass <span class="method">-init</span> methods that take primitive types as parameters.</p>

<p>Note that many Foundation Kit classes, such as <span class="class">NSString</span>, are actually abstract fronts to <a href="http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/chapter_3_section_9.html">class clusters</a>, so direct inheritance from these classes will not work. To have the same effect, you can use Apple's recommended approach for "inheriting" from class clusters like NSString: create an Objective-C object as a member variable, and use wrapper methods that redirect appropriate messages to it (an example can be seen in the source code for the <span class="class">FSFile</span> class in the <a href="http://pages.cs.wisc.edu/~weinrich/projects/fscript/index.html">fscript command-line interpreter</a>). If you only want to add methods to the class, use a <a target="_self" href="#categories">category</a> instead.</p>





<h2><a name="super"/>Calling Superclass Methods</h2>
<p>F-Script 2.0 introduces a reserved <code>super</code> keyword, but FSClass needs additional context that this keyword does not provide. Particularly, the super-class method invocation needs to know the class of the current Block. This information, which is also needed in languages like Objective-C, Java, and C++, is normally provided by the compiler. Because the F-Script interpreter does not know about FSClass, you must supply this context manually, as the second argument to the method <span class="method">doSuperMethod:currentClass:</span>. The first argument should be the selector of the method you want to call, and any arguments can be passed using the keywords <code>with:</code>, similar to the syntax for executing blocks.</p>

<p>Up to this point, all of our class factories have performed initialization inside the factory method, which prevents using superclass initialization methods. A solution is to separate instantiation and initialization by creating a private <span class="method">_init</span> method that is called from the class factory to initialize the object. This init method can then call the superclass init method, and so on up the class hierarchy. The superclass initialization method is sometimes called the <em>designated initializer</em>.</p>

<p>It is very important that the top-level initializer code use the Cocoa method <span class="method">init</span>, to ensure that the object is properly registered with the Cocoa runtime system.</p>

<p>The following example shows how to create a subclass and call superclass methods, including initialization methods:</p>

<!--
  SuperClass := FSClass newClass:'SuperClass'.

  SuperClass addProperty:'foo'.

  "The initializer is private, hence the underscore.
   This method is the *designated initializer* for SuperClass"
  SuperClass onMessage:#_initWithFoo: do:[ :self :fooValue |
      self init.  "Cocoa's init method should be called first"
      self setFoo:fooValue.
      self
  ].

  "Only this class method should be called by users"
  SuperClass onClassMessage:#superObjectWithFoo: do:[ :self :fooValue |
      "Actual initialization is handled in the _init method"
      self alloc _initWithFoo:fooValue
  ].

  SuperClass onMessage:#doThing do:[ :self |
      sys log:'Hi from SuperClass! foo:' ++ (self foo description).
  ].

  SuperClass onMessage:#doStuff do:[ :self |
      sys log:'Bonjour from SuperClass! foo:' ++ (self foo description).
  ].


  "Create a subclass"
  SubClass := FSClass newClass:'SubClass' withParent:SuperClass.

  SubClass addProperty:'bar'.


  "This initializer calls the superclass's init: method"
  SubClass onMessage:#_initWithBar: do:[ :self :barValue |
      "Call the designated initializer with a default foo value"
      "We have to specify which class this Block is attached to"
      "  so that the runtime has the proper context"
      self := self doSuperMethod:#_initWithFoo: with:5.
      self setBar:barValue.
      self
  ].

  "Only this class factory method should be called by users"
  SubClass onClassMessage:#subObjectWithBar: do:[ :self :barValue |
      "Actual initialization is handled in the _init method"
      self alloc init _initWithBar:barValue
  ].


  "Execute superclass's doThing first"
  SubClass onMessage:#doThing do:[ :self |
      self doSuperMethod:#doThing currentClass:SubClass
      sys log:'Hi from SubClass! bar:' ++ (self bar description)
  ].


  sub := SubClass subObjectWithBar:10.

  " Prints 'Bonjour from SuperClass! foo:5"
  sub doStuff.

  "Prints 'Hi from SuperClass! foo:5' 'Hi from SubClass! bar:10'"
  sub doThing.
  
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">SuperClass</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>SuperClass<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="storage storage_class storage_class_fscript">SuperClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>foo<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>The initializer is private, hence the underscore.
 This method is the *designated initializer* for SuperClass<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SuperClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">_initWithFoo:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :fooValue</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> init<span class="punctuation punctuation_fscript">.</span>  <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Cocoa's init method should be called first<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setFoo:</span>fooValue<span class="punctuation punctuation_fscript">.</span>
    <span class="constant constant_language constant_language_fscript">self</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Only this class method should be called by users<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SuperClass</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">superObjectWithFoo:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :fooValue</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Actual initialization is handled in the _init method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="constant constant_language constant_language_fscript">self</span> alloc <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">_initWithFoo:</span>fooValue
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SuperClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">doThing</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Hi from SuperClass! foo:<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> foo description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SuperClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">doStuff</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Bonjour from SuperClass! foo:<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> foo description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create a subclass<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">SubClass</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>SubClass<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withParent:</span><span class="storage storage_class storage_class_fscript">SuperClass</span><span class="punctuation punctuation_fscript">.</span>

<span class="storage storage_class storage_class_fscript">SubClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>bar<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This initializer calls the superclass's init: method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SubClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">_initWithBar:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :barValue</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Call the designated initializer with a default foo value<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>We have to specify which class this Block is attached to<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>  so that the runtime has the proper context<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="constant constant_language constant_language_fscript">self</span> :<span class="operator operator_fscript">=</span> <span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#_initWithFoo:</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>
    <span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setBar:</span>barValue<span class="punctuation punctuation_fscript">.</span>
    <span class="constant constant_language constant_language_fscript">self</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Only this class factory method should be called by users<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SubClass</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">subObjectWithBar:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :barValue</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Actual initialization is handled in the _init method<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="constant constant_language constant_language_fscript">self</span> alloc init <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">_initWithBar:</span>barValue
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Execute superclass's doThing first<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">SubClass</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">doThing</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#doThing</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">SubClass</span>
    <span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Hi from SubClass! bar:<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> bar description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="variable variable_declaration variable_declaration_fscript">sub</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">SubClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">subObjectWithBar:</span><span class="constant constant_numeric constant_numeric_fscript">10</span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span> Prints 'Bonjour from SuperClass! foo:5<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
sub doStuff<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Prints 'Hi from SuperClass! foo:5' 'Hi from SubClass! bar:10'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
sub doThing<span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>This syntax for using superclass methods has changed from earlier versions of FSClass. The old system (using the method <span class="method">super:</span>) did not work properly and conflicts with a new reserved keyword. It has been completely removed.</p>

<p>For more information on using factory methods, initializers, and inheritance, see Apple's text <a href="http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/ObjC.pdf">The Objective-C Programming Language</a>.

<p>If your class inherits from an Objective-C parent, you can use <span class="method">doSuperMethod:currentClass:</span> to call methods of the parent class's initializer, as well as other overridden methods. There is one critical caveat as of FSClass 2.1: <strong>objects will not be translated to primitive types by the F-Script runtime</strong>, as they will with normal methods. E.g., an instance of <span class="class">NSNumber</span> will not be converted into an <span class="literal">int</span>; this effectively makes superclass methods with primitive type arguments impossible to use. This limitation will be fixed in a future release; at the moment, it may be avoided by using the simple method <span class="method">init</span> and then using property setters, if available, to perform the object-primitive conversion.</p>

<p>Up to six arguments can be passed with the <span class="method">doSuperMethod:currentClass:with:with:...</span> syntax. For more arguments, use the method <span class="method">doSuperMethod:currentClass:valueWithArguments:</span>, similar to that for blocks:</p>

<!--
  obj doSuperMethod:#noArgMethod                       currentClass:MyClass.
  obj doSuperMethod:#oneArgMethod:                     currentClass:MyClass with:1.
  obj doSuperMethod:#twoArgMethod:arg:                 currentClass:MyClass with:1 with:2.
  obj doSuperMethod:#threeArgMethod:arg:arg:           currentClass:MyClass with:1 with:2 with:3.
  obj doSuperMethod:#fourArgMethod:arg:arg:arg:        currentClass:MyClass with:1 with:2 with:3 with:4.
  obj doSuperMethod:#fiveArgMethod:arg:arg:arg:arg:    currentClass:MyClass with:1 with:2 with:3 with:4 with:5.
  obj doSuperMethod:#sixArgMethod:arg:arg:arg:arg:arg: currentClass:MyClass with:1 with:2 with:3 with:4 with:5 with:6.

  obj doSuperMethod:#twoArgMethod:arg: currentClass:MyClass withArguments:{ 1, 2 }.
  obj doSuperMethod:#eightArgMethod:arg:arg:arg:arg:arg:arg:arg: currentClass:MyClass withArguments:{ 1, 2, 3, 4, 5, 6, 7, 8 }.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript">obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#noArgMethod</span>                       <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span><span class="punctuation punctuation_fscript">.</span>
obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#oneArgMethod:</span>                     <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">1</span><span class="punctuation punctuation_fscript">.</span>
obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#twoArgMethod:arg:</span>                 <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">1</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">2</span><span class="punctuation punctuation_fscript">.</span>
obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#threeArgMethod:arg:arg:</span>           <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">1</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">2</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">3</span><span class="punctuation punctuation_fscript">.</span>
obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#fourArgMethod:arg:arg:arg:</span>        <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">1</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">2</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">3</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">4</span><span class="punctuation punctuation_fscript">.</span>
obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#fiveArgMethod:arg:arg:arg:arg:</span>    <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">1</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">2</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">3</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">4</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>
obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#sixArgMethod:arg:arg:arg:arg:arg:</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">1</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">2</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">3</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">4</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">5</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="constant constant_numeric constant_numeric_fscript">6</span><span class="punctuation punctuation_fscript">.</span>

obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#twoArgMethod:arg:</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withArguments:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">{</span> <span class="constant constant_numeric constant_numeric_fscript">1</span><span class="punctuation punctuation_fscript">,</span> <span class="constant constant_numeric constant_numeric_fscript">2</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">}</span><span class="punctuation punctuation_fscript">.</span>
obj <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">doSuperMethod:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#eightArgMethod:arg:arg:arg:arg:arg:arg:arg:</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">currentClass:</span><span class="storage storage_class storage_class_fscript">MyClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withArguments:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">{</span> <span class="constant constant_numeric constant_numeric_fscript">1</span><span class="punctuation punctuation_fscript">,</span> <span class="constant constant_numeric constant_numeric_fscript">2</span><span class="punctuation punctuation_fscript">,</span> <span class="constant constant_numeric constant_numeric_fscript">3</span><span class="punctuation punctuation_fscript">,</span> <span class="constant constant_numeric constant_numeric_fscript">4</span><span class="punctuation punctuation_fscript">,</span> <span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">,</span> <span class="constant constant_numeric constant_numeric_fscript">6</span><span class="punctuation punctuation_fscript">,</span> <span class="constant constant_numeric constant_numeric_fscript">7</span><span class="punctuation punctuation_fscript">,</span> <span class="constant constant_numeric constant_numeric_fscript">8</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">}</span><span class="punctuation punctuation_fscript">.</span>
</span></pre></div>

<p>If you supply the wrong number of arguments to <span class="method">doSuperMethod:currentClass</span>, or call it with a selector that the object's superclass does not implement, it will throw an exception.</p>











<h2><a name="advancedinit"/>Class Clusters</h2>
<p>In Objective-C, a factory method can actually return an object of a derived class. <span class="method">NSString</span> use this ability to return instances of private subclasses that are optimized for different cases: for example, using different storage layouts when initializing with UTF-8 data versus ASCII. This design pattern is called a <a href="http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaObjects/chapter_3_section_9.html">class cluster</a>, and is used heavily throughout the Foundation and Application Kit frameworks.</p>

<p>Classes created with FSClass can also implement private class clusters. In the following example, the factory method for <span class="class">Rectangle</span> actually returns a <span class="class">Square</span> in the case that the rectangle has sides of equal length:</p>

<!--
Rectangle := FSClass newClass:'Rectangle'.

Rectangle addProperty:'length'.
Rectangle addProperty:'height'.

Rectangle onMessage:#area do:[ :self |
    (self height) * (self length)
].

Rectangle onMessage:#perimeter do:[ :self |
    (self height * 2) + (self length * 2).
].

"Compute angle of lower-left diagonal"
Rectangle onMessage:#lowerLeftDiagonalAngle do:[ :self |
    (self height / self length) arcTan.
].


"Subclass of Rectangle that has specialized geometry methods"
Square := FSClass newClass:'Square' parent:Rectangle.

"Angle of a square's diagonal is always pi / 4"
Square addClassProperty:'rightAngle' withValue:(3.14159 / 4).

Square onClassMessage:#squareWithSide: do:[ :self :sideLength | |square|
    "Set size and width so that accessors will work as expected"
    square := self alloc init.
    square setLength:sideLength.
    square setHeight:sideLength.
    square
].

Square onMessage:#area do:[ :self |
    self length raisedTo:2
].

Square onMessage:#perimeter do:[ :self |
    self length * 4
].

"Return hard-coded 90degree angle"
Square onMessage:#lowerLeftDiagonalAngle do:[ :self |
    Square rightAngle
].



"If the user creates a rectangle with equal sides, secretly
 return a Square instead"
Rectangle onClassMessage:#rectangleWithLength:height: do:[ :self :length :height |
    (length = height) ifTrue:[
        "Return a Square instead"
        Square squareWithSide:length
    ]
    ifFalse:[ |rect|
        rect := self alloc init.
        rect setLength:length.
        rect setHeight:height.
        rect
    ]
].


"This line creates a Rectangle"
rect1 := Rectangle rectangleWithLength:4 height:5.
sys log:rect1.

"This line actually creates a Square"
rect2 := Rectangle rectangleWithLength:4 height:4.
sys log:rect2.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">Rectangle</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Rectangle<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="storage storage_class storage_class_fscript">Rectangle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>length<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="storage storage_class storage_class_fscript">Rectangle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>height<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Rectangle</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">area</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> height<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="operator operator_fscript">*</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> length<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Rectangle</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">perimeter</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> height <span class="operator operator_fscript">*</span> <span class="constant constant_numeric constant_numeric_fscript">2</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="operator operator_fscript">+</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> length <span class="operator operator_fscript">*</span> <span class="constant constant_numeric constant_numeric_fscript">2</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Compute angle of lower-left diagonal<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Rectangle</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">lowerLeftDiagonalAngle</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_language constant_language_fscript">self</span> height <span class="operator operator_fscript">/</span> <span class="constant constant_language constant_language_fscript">self</span> length<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> arcTan<span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Subclass of Rectangle that has specialized geometry methods<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Square</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Square<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">parent:</span><span class="storage storage_class storage_class_fscript">Rectangle</span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Angle of a square's diagonal is always pi / 4<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Square</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addClassProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>rightAngle<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withValue:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="constant constant_numeric constant_numeric_fscript">3.14159</span> <span class="operator operator_fscript">/</span> <span class="constant constant_numeric constant_numeric_fscript">4</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Square</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">squareWithSide:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :sideLength</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">square</span>|
    <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Set size and width so that accessors will work as expected<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
    <span class="variable variable_declaration variable_declaration_fscript">square</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
    square <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setLength:</span>sideLength<span class="punctuation punctuation_fscript">.</span>
    square <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setHeight:</span>sideLength<span class="punctuation punctuation_fscript">.</span>
    square
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Square</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">area</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> length <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">raisedTo:</span><span class="constant constant_numeric constant_numeric_fscript">2</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Square</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">perimeter</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> length <span class="operator operator_fscript">*</span> <span class="constant constant_numeric constant_numeric_fscript">4</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Return hard-coded 90degree angle<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Square</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">lowerLeftDiagonalAngle</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="storage storage_class storage_class_fscript">Square</span> rightAngle
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>



<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>If the user creates a rectangle with equal sides, secretly
 return a Square instead<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Rectangle</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">rectangleWithLength:height:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :length :height</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>length <span class="operator operator_fscript">=</span> height<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">ifTrue:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">        </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Return a Square instead<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
        <span class="storage storage_class storage_class_fscript">Square</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">squareWithSide:</span>length
    </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span>
    <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">ifFalse:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">rect</span>|
        <span class="variable variable_declaration variable_declaration_fscript">rect</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
        rect <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setLength:</span>length<span class="punctuation punctuation_fscript">.</span>
        rect <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setHeight:</span>height<span class="punctuation punctuation_fscript">.</span>
        rect
    </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This line creates a Rectangle<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">rect1</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">Rectangle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">rectangleWithLength:</span><span class="constant constant_numeric constant_numeric_fscript">4</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">height:</span><span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span>rect1<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This line actually creates a Square<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">rect2</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">Rectangle</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">rectangleWithLength:</span><span class="constant constant_numeric constant_numeric_fscript">4</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">height:</span><span class="constant constant_numeric constant_numeric_fscript">4</span><span class="punctuation punctuation_fscript">.</span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span>rect2<span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>


<h2><a name="anonymous"/>Class Names and Anonymous Classes</h2>
<p>When creating a class with <code>FSClass newClass:</code>, you can specify the name that will be used for the class by the Objective-C runtime. This cannot conflict with the name of any existing class, so code like <code>NewClass := FSClass newClass:'NSObject'</code> will throw an exception because <span class="literal">NSObject</span> is, of course, the name of an existing class. If you know the name of a class that was created with FSClass, you can retrieve it by using <code>previouslyCreatedClass := FSClass getClass:'ClassName'.</code> If the string is the name of an Objective-C class, FSClass will return a proxy for it (see <a href="#proxy">Objective-C Class Proxies and Categories</a>).</p>

<p>If you omit a name (by either supplying <span class="literal">nil</span> or using the argument-less <span class="method">newClass</span> method), the new class is given a random, unique name. If you lose the variable to which the class was originally bound, you won't be able to get that class back. A similar concept in Java is the <em>anonymous inner class</em>, which implements an interface but has no name of its own:</p>

<!--
public class MyOptionPane extends JOptionPane {
    // ... button member declarations ...
    protected void buildOptionPane() {
        button1 = new JButton();
        button2 = new JButton();

        // Create a single instance of an anonymous event listener
        button1.addActionListener(
            new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent e) {
                    // do something
                }
            }
        );

        // .. repeat for each button
    }
}
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_java"><span class="meta meta_definition meta_definition_class meta_definition_class_java"><span class="storage storage_modifier storage_modifier_java">public </span><span class="storage storage_type storage_type_java">class</span> <span class="entity entity_name entity_name_type entity_name_type_class entity_name_type_class_java">MyOptionPane</span> <span class="meta meta_definition meta_definition_class meta_definition_class_extends meta_definition_class_extends_java"><span class="storage storage_modifier storage_modifier_java">extends</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">JOptionPane</span> </span></span><span class="punctuation punctuation_pairing punctuation_pairing_java">{</span>
  <span class="comment comment_line comment_line_double-slash comment_line_double-slash_java">// ... button member declarations ...
</span><span class="meta meta_definition meta_definition_method meta_definition_method_java">    <span class="storage storage_modifier storage_modifier_java">protected </span><span class="storage storage_primitive storage_primitive_java">void</span> <span class="entity entity_name entity_name_function entity_name_function_java">buildOptionPane</span><span class="meta meta_definition meta_definition_param-list meta_definition_param-list_java"><span class="punctuation punctuation_pairing punctuation_pairing_java">(</span></span>)<span class="meta meta_definition meta_definition_param-list meta_definition_param-list_java"> </span></span><span class="punctuation punctuation_pairing punctuation_pairing_java">{</span>
      <span class="variable variable_java">button1</span> <span class="operator operator_other operator_other_java">=</span> <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">JButton</span><span class="punctuation punctuation_pairing punctuation_pairing_java">()</span><span class="punctuation punctuation_java">;</span>
      <span class="variable variable_java">button2</span> <span class="operator operator_other operator_other_java">=</span> <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="support support_type support_type_built-ins support_type_built-ins_java">JButton</span><span class="punctuation punctuation_pairing punctuation_pairing_java">()</span><span class="punctuation punctuation_java">;</span>
        
      <span class="comment comment_line comment_line_double-slash comment_line_double-slash_java">// Create a single instance of an anonymous event listener
</span>        <span class="meta meta_variable meta_variable_member-access meta_variable_member-access_java"><span class="variable variable_java">button1</span><span class="operator operator_access operator_access_java">.</span><span class="entity entity_function entity_function_invocation entity_function_invocation_java">addActionListener</span><span class="punctuation punctuation_pairing punctuation_pairing_java">(</span></span>
          <span class="keyword keyword_other keyword_other_class-fns keyword_other_class-fns_java">new</span> <span class="support support_type support_type_java">java.awt.event.ActionListener</span><span class="punctuation punctuation_pairing punctuation_pairing_java">()</span> <span class="punctuation punctuation_pairing punctuation_pairing_java">{</span>
<span class="meta meta_definition meta_definition_method meta_definition_method_java">                <span class="storage storage_modifier storage_modifier_java">public </span><span class="storage storage_primitive storage_primitive_java">void</span> <span class="entity entity_name entity_name_function entity_name_function_java">actionPerformed</span><span class="meta meta_definition meta_definition_param-list meta_definition_param-list_java"><span class="punctuation punctuation_pairing punctuation_pairing_java">(</span><span class="support support_type support_type_java">java.awt.event.ActionEvent</span> <span class="variable variable_parameter variable_parameter_java">e</span></span>)<span class="meta meta_definition meta_definition_param-list meta_definition_param-list_java"> </span></span><span class="punctuation punctuation_pairing punctuation_pairing_java">{</span>
                  <span class="comment comment_line comment_line_double-slash comment_line_double-slash_java">// do something
</span>                <span class="punctuation punctuation_pairing punctuation_pairing_java">}</span>
          <span class="punctuation punctuation_pairing punctuation_pairing_java">}</span>
      <span class="punctuation punctuation_pairing punctuation_pairing_java">)</span><span class="punctuation punctuation_java">;</span>
      
      <span class="comment comment_line comment_line_double-slash comment_line_double-slash_java">// .. repeat for each button
</span>    <span class="punctuation punctuation_pairing punctuation_pairing_java">}</span>
<span class="punctuation punctuation_pairing punctuation_pairing_java">}</span>
</span></pre>
</div>

<p>In languages like Objective-C and F-Script, the dynamic method dispatching system obviates much of the need for such constructions. However, anonymous classes can be useful for other purposes. Say that we have a configuration file in simple <span class="literal">key=value</span> format, one pair per line. We would like to read in this file at the beginning of our program and put it in a dictionary. However, constantly calling <code>dict objectForKey:'keyName'</code> is cumbersome; wouldn't it be better to make a single object that had a separate method for each key, so that we could directly call <code>config keyName</code> instead? The file below exports a single function that does just that: it creates a new, anonymous class with one method for each configuration key, and uses closures to bind that method to the key's value. Because we don't know the key names ahead of time, we use <span class="method">onMessageName:do:</span> to supply the name of a selector instead of the selector itself. The function then returns a single instance of the class. This example uses the <span class="class">FSFile</span> class from the <a href="http://www.cs.wisc.edu/~weinrich/projects/fscript/Documentation/index.html"><code>fscript</code></a> command-line program.</p>

<!--
"
    ConfigFile.fs
    This function reads in a configuration file in simple 'key=value' format,
    then creates a singleton instance with keys as methods
"

ConfigFile := FSClass newClass:'ConfigFile'.


ConfigFile onClassMessage:#readFile: do:[ :self :filename | |file data newClass|
    "Read in the lines of the file and split them into pairs"
    file := FSFile open:filename mode:'<'.
    data := file readlines split:' *= *'.
    file closeFile.

    "Create a new, anonymous class"
    newClass := FSClass newClass.

    "For each config line in the file, add a new method to
     the class that returns the corresponding value"
    "We could use addProperty: for this, but we want them to
     be read-only"
    "The values will always be strings, so it is up to the
     user to convert them into booleans/numbers/dates/etc."
    [ :fileLine |
        newClass onMessageName:(fileLine at:0) do:[
            fileLine at:1
        ].
    ]
    value: @ data.

    "return an instance of the anonymous class"
    newClass alloc init
]
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>
    ConfigFile.fs
    This function reads in a configuration file in simple 'key=value' format,
    then creates a singleton instance with keys as methods
<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>

<span class="storage storage_class storage_class_fscript">ConfigFile</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>ConfigFile<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">ConfigFile</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">readFile:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :filename</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">file data newClass</span>|
  <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Read in the lines of the file and split them into pairs<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
  <span class="variable variable_declaration variable_declaration_fscript">file</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">FSFile</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">open:</span>filename <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">mode:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>&lt;<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
  <span class="variable variable_declaration variable_declaration_fscript">data</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> file readlines <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">split:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span> *= *<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
  file closeFile<span class="punctuation punctuation_fscript">.</span>
  
  <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create a new, anonymous class<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
  <span class="variable variable_declaration variable_declaration_fscript">newClass</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> newClass<span class="punctuation punctuation_fscript">.</span>
  
  <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>For each config line in the file, add a new method to
   the class that returns the corresponding value<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
  <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>We could use addProperty: for this, but we want them to
   be read-only<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
  <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>The values will always be strings, so it is up to the
   user to convert them into booleans/numbers/dates/etc.<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
  <span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:fileLine</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">        </span><span class="meta meta_block meta_block_content meta_block_content_fscript">newClass <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onMessageName:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>fileLine <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">at:</span><span class="constant constant_numeric constant_numeric_fscript">0</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">do:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">            </span><span class="meta meta_block meta_block_content meta_block_content_fscript">fileLine <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">at:</span><span class="constant constant_numeric constant_numeric_fscript">1</span>
      </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
  </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span>
  <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">value:</span> <span class="operator operator_access operator_access_fscript">@</span> data<span class="punctuation punctuation_fscript">.</span>
  
  <span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>return an instance of the anonymous class<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
  newClass alloc init
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>Because the class was never given a name, we have no way to retrieve it, so there can only be a single instance (the one returned from the function). We can use this file like so (assuming that we have <code>sys import</code> the from the command-line <span class="literal">fscript</span> program):</p>

<!--
#!/usr/bin/fscript

sys import:'ConfigFile'.

config := ConfigFile readFile:'normal.conf'.

((config verbose) = 'true') ifTrue:[
    ....
].

sys log:(config greeting).
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_shebang comment_shebang_fscript">#!/usr/bin/fscript</span>

<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">import:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>ConfigFile<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="variable variable_declaration variable_declaration_fscript">config</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">ConfigFile</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">readFile:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>normal.conf<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="punctuation punctuation_pairing punctuation_pairing_fscript">((</span>config verbose<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="operator operator_fscript">=</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>true<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">ifTrue:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="punctuation punctuation_fscript">....</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>config greeting<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>Note that we must manually check the truth value of <span class="literal">verbose</span>, since F-Script does not perform automatic type conversion. For another approach (valid only with property list files), see the <a href="reference.html">reference</a> entry for <span class="method">addPropertiesFromDictionary:</span>.</p>

<p>The class object of an instance can also be retrieved with the Foundation <span class="method">getClass</span> method:</p>

<!--
"Create an instance of a blank, anonymous class"
myInstance := FSClass newClass alloc init.

"This line will throw an exception because foo: is not defined for this class"
[ myInstance foo:5 ]
onException:[ :e |
    sys log:('Caught an exception: ' ++ e description).
].

"Retrieve the class and add another method to it"
(myInstance class) onMessage:#foo: do:[ :self :fooValue |
    sys log:'Foo value: ' ++ (fooValue description).
].

"This line will now run without any problems"
"Prints 'Foo value: 5'"
myInstance foo:5.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create an instance of a blank, anonymous class<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">myInstance</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> newClass alloc init<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This line will throw an exception because foo: is not defined for this class<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span><span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">myInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">foo:</span><span class="constant constant_numeric constant_numeric_fscript">5</span> </span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span>
<span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onException:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:e</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Caught an exception: <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> e description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Retrieve the class and add another method to it<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>myInstance class<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onMessage:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#foo:</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">do:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :fooValue</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Foo value: <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>fooValue description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This line will now run without any problems<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Prints 'Foo value: 5'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
myInstance <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">foo:</span><span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>


<h2><a name="class"/>Class Methods and Data</h2>
<p>Besides factory methods, classes can also have functions and data attached directly to them. This example shows how to create a counter that keeps track of how many instances have been created:</p>

<!--
Car := FSClass newClass:'Car'.

Car addProperty:'type'.

"Counter - would be a static variable in C++/Java"
Car addClassProperty:'count' withValue:0.
Car onClassMessage:#createdCarCount do:[ :class |
    class count
].

Car onClassMessage:#carWithModel: do:[ :self :type | |car|
    Car setCount:(Car count + 1).
    car := self alloc init.
    car setType:type.
    car
].

car1 := Car carWithModel:'sedan'.
car2 := Car carWithModel:'SUV'.

"Prints '2 cars have been created'."
sys log:(Car createdCarCount description) ++ ' cars have been created'.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="storage storage_class storage_class_fscript">Car</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Car<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="storage storage_class storage_class_fscript">Car</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>type<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Counter - would be a static variable in C++/Java<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Car</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">addClassProperty:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>count<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">withValue:</span><span class="constant constant_numeric constant_numeric_fscript">0</span><span class="punctuation punctuation_fscript">.</span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Car</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">createdCarCount</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:class</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript">class count
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Car</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">carWithModel:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :type</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">car</span>|
    <span class="storage storage_class storage_class_fscript">Car</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setCount:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="storage storage_class storage_class_fscript">Car</span> count <span class="operator operator_fscript">+</span> <span class="constant constant_numeric constant_numeric_fscript">1</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
    <span class="variable variable_declaration variable_declaration_fscript">car</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
    car <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setType:</span>type<span class="punctuation punctuation_fscript">.</span>
    car
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="variable variable_declaration variable_declaration_fscript">car1</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">Car</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">carWithModel:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>sedan<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="variable variable_declaration variable_declaration_fscript">car2</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="storage storage_class storage_class_fscript">Car</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">carWithModel:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>SUV<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Prints '2 cars have been created'.<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="storage storage_class storage_class_fscript">Car</span> createdCarCount description<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="operator operator_fscript">++</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span> cars have been created<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>Like instance properties or methods, class properties and methods are inherited by subclasses.</p>




<h2><a name="categories"/>Categories in F-Script</h2>
<p>One of the most useful language features of Objective-C is categories: the ability to add methods to a class piecemeal, after the class has been declared, even after it has been compiled! In FSClass 3.0, all classes, including those written in Objective-C, have the same method-addition abilities. This includes Cocoa classes for which the source code is not available:</p>

<!--
"This code uses the regular expression method -replace:with: from the fscript Unix tool."
NSString onMessage:#bork do:[ :self |
    ((self replace:'W' with:'V') replace:'w' with:'v') replace:'o' with:'oo'
].

"Prints 'Helloo voorld!'"
out println:('Hello world!' bork).
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>This code uses the regular expression method -replace:with: from the fscript Unix tool.<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="support support_class support_class_cocoa">NSString</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onMessage:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#bork</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">do:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="punctuation punctuation_pairing punctuation_pairing_fscript">((</span><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">replace:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>W<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>V<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">replace:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>w<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>v<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">replace:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>o<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>oo<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Prints 'Helloo voorld!'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="constant constant_language constant_language_fscript">out</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">println:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Hello world!<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> bork<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>The method <span class="method">-bork</span> will now be available to all instances of NSString, even through the NSString source code is not available, and is in a different language.</p>

<p>Objective-C classes have all the introspection and modification methods as those created in F-Script, with the exception that you cannot add instance variables; calling <span class="method">+addProperty:</span> or <span class="method">+addProperty:withDefault:</span> will throw exceptions.</p>
  
<p>The ability to add arbitrary methods to Foundation classes in F-Script is extremely powerful, especially when combined with F-Script's flexible syntax. For example, many languages like LISP, Ruby, and PHP have a 'pairing operator', which takes two objects and returns a simple object that pairs them together. With a class proxy, we can add that capability to <span class="class">NSObject</span> and make it available to every single object in the Cocoa codesphere:</p>


<!--
"Create a simple Pair class"
Pair := FSClass newClass:'Pair' properties:{'first', 'second'}.
Pair onClassMessage:#pair:with: do:[ :self :first :second | |newPair|
    newPair := self alloc init.
    newPair setFirst:first; setSecond:second.
    newPair
].
"Simple description: (obj1, objc2)"
Pair onMessage:#description do:[ :self |
    '(' ++ self first description ++ ', ' ++ self second description ++ ')'
].

"Add a pairing operator to NSObject, and thus to all classes"
NSObject onMessage:#operator_equal_greater: do:[ :self :second |
    Pair pair:self with:second.
].


"Now we can pair any two objects together"
myPair := 1 => 5.

"Prints '(1, 5)'"
sys log:myPair description.

"Like Foundation collection objects, Pairs are heterogeneous"
myMixedPair := 'hello!' => 5.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Create a simple Pair class<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="storage storage_class storage_class_fscript">Pair</span> :<span class="operator operator_fscript">=</span> <span class="storage storage_class storage_class_fscript">FSClass</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">newClass:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>Pair<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">properties:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">{</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>first<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">,</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>second<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">}</span><span class="punctuation punctuation_fscript">.</span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Pair</span> <span class="keyword keyword_other keyword_other_fscript">onClassMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">pair:with:</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :first :second</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript"> </span><span class="meta meta_block meta_block_content meta_block_content_fscript">|<span class="variable variable_other variable_other_local variable_other_local_fscript">newPair</span>|
    <span class="variable variable_declaration variable_declaration_fscript">newPair</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_language constant_language_fscript">self</span> alloc init<span class="punctuation punctuation_fscript">.</span>
    newPair <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setFirst:</span>first; <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setSecond:</span>second<span class="punctuation punctuation_fscript">.</span>
    newPair
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>
<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Simple description: (obj1, objc2)<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="entity entity_name entity_name_method entity_name_method_fscript"><span class="storage storage_class storage_class_fscript">Pair</span> <span class="keyword keyword_other keyword_other_fscript">onMessage:</span><span class="punctuation punctuation_other punctuation_other_fscript">#</span><span class="constant constant_selector constant_selector_fscript">description</span> <span class="keyword keyword_other keyword_other_fscript">do:</span></span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>(<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="constant constant_language constant_language_fscript">self</span> first description <span class="operator operator_fscript">++</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>, <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="constant constant_language constant_language_fscript">self</span> second description <span class="operator operator_fscript">++</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>)<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Add a pairing operator to NSObject, and thus to all classes<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="support support_class support_class_cocoa">NSObject</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onMessage:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#operator_equal_greater:</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">do:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :second</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="storage storage_class storage_class_fscript">Pair</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">pair:</span><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">with:</span>second<span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Now we can pair any two objects together<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">myPair</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="constant constant_numeric constant_numeric_fscript">1</span> <span class="operator operator_fscript">=&gt;</span> <span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Prints '(1, 5)'<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span>myPair description<span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Like Foundation collection objects, Pairs are heterogeneous<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">myMixedPair</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>hello!<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">=&gt;</span> <span class="constant constant_numeric constant_numeric_fscript">5</span><span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>(Note that, due to F-Script's strict left-to-right precedence rules, the pairing arrow cannot be chained to create a LISP-style linked list).</p>

<p>Proxies can make Foundation classes much more convenient to use. One problem with Objective-C is that method names tend to be verbose; a simple dictionary lookup/set in most languages is only a few characters, but requires the long methods <span class="method">-objectForKey:</span> and <span class="method">-setObject:forKey:</span> in Cocoa. This makes dictionary-heavy Cocoa code much more cumbersome than equivalent code in Perl or Python. The following example shows how we can use F-Script categories to add abbreviations to <span class="class">NSDictionary</span>, including a subscript operator and a set operator that takes a <span class="class">Pair</span>:</p>

<!--
  "Add a C++ style subscript operator - will be inherited by NSMutableDictionary"
  NSDictionary onMessage:#operator_hyphen_greater: do:[ :self :key |
      self objectForKey:key
  ].

  "Add a set: method that takes a pair"
  NSMutableDictionary onMessage:#set: do:[ :self :pair |
      self setObject:(pair second) forKey:(pair first).
  ].


  "Now using a dictionary is much easier"
  dict := NSMutableDictionary dictionary.

  dict set: 'keyA'=>6.
  dict set: 'keyB'=>'hello'.

  sys log:'keyA: ' ++ (dict->'keyA') description.
  sys log:'keyB: ' ++ (dict->'keyB') description.
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_fscript"><span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Add a C++ style subscript operator - will be inherited by NSMutableDictionary<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="support support_class support_class_cocoa">NSDictionary</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onMessage:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#operator_hyphen_greater:</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">do:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :key</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">objectForKey:</span>key
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Add a set: method that takes a pair<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="support support_class support_class_cocoa">NSMutableDictionary</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">onMessage:</span><span class="constant constant_other constant_other_block constant_other_block_compact constant_other_block_compact_fscript">#set:</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">do:</span><span class="meta meta_block meta_block_fscript"><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">[</span> <span class="variable variable_parameter variable_parameter_block variable_parameter_block_fscript">:self :pair</span> |<span class="meta meta_block meta_block_header meta_block_header_fscript">
</span><span class="meta meta_block meta_block_header meta_block_header_fscript">    </span><span class="meta meta_block meta_block_content meta_block_content_fscript"><span class="constant constant_language constant_language_fscript">self</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">setObject:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>pair second<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">forKey:</span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>pair first<span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span><span class="punctuation punctuation_fscript">.</span>
</span><span class="punctuation punctuation_section punctuation_section_block punctuation_section_block_fscript">]</span></span><span class="punctuation punctuation_fscript">.</span>


<span class="comment comment_block comment_block_quotes comment_block_quotes_fscript"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_begin punctuation_definition_comment_begin_fscript">"</span>Now using a dictionary is much easier<span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_end punctuation_definition_comment_end_fscript">"</span></span>
<span class="variable variable_declaration variable_declaration_fscript">dict</span> <span class="keyword keyword_operator keyword_operator_assignment keyword_operator_assignment_fscript">:=</span> <span class="support support_class support_class_cocoa">NSMutableDictionary</span> dictionary<span class="punctuation punctuation_fscript">.</span>

dict <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">set:</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>keyA<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="operator operator_fscript">=&gt;</span><span class="constant constant_numeric constant_numeric_fscript">6</span><span class="punctuation punctuation_fscript">.</span>
dict <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">set:</span> <span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>keyB<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="operator operator_fscript">=&gt;</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>hello<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_fscript">.</span>

<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>keyA: <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>dict<span class="operator operator_fscript">-&gt;</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>keyA<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> description<span class="punctuation punctuation_fscript">.</span>
<span class="constant constant_language constant_language_fscript">sys</span> <span class="entity entity_function entity_function_invocation entity_function_invocation_fscript">log:</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>keyB: <span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span> <span class="operator operator_fscript">++</span> <span class="punctuation punctuation_pairing punctuation_pairing_fscript">(</span>dict<span class="operator operator_fscript">-&gt;</span><span class="string string_quoted string_quoted_double string_quoted_double_fscript"><span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_begin punctuation_definition_string_begin_fscript">'</span>keyB<span class="punctuation punctuation_definition punctuation_definition_string punctuation_definition_string_end punctuation_definition_string_end_fscript">'</span></span><span class="punctuation punctuation_pairing punctuation_pairing_fscript">)</span> description<span class="punctuation punctuation_fscript">.</span>
</span></pre>
</div>

<p>For a longer example, see the file <span class="directory">examples/Switch.fs</span> in the FSClass sources directory. This file shows how a <code>switch</code> statement can be added to the F-Script language, solely by adding methods to existing Foundation classes.</p>





<h2><a name="reflection"/>Reflection Methods</h2>
<p>FSClass classes are fully reflective. The following methods provide information about methods, classes, and inheritance relationships:</p>

<ul>
    <li><span class="method">propertyNames</span></li>
    <li><span class="method">allPropertyNames</span></li>
    <li><span class="method">methods</span></li>
    <li><span class="method">allMethods</span></li>
    <li><span class="method">methodNames</span></li>
    <li><span class="method">allMethodNames</span></li>
    <li><span class="method">blockForSelector:</span></li>
    <li><span class="method">blockForClassSelector:</span></li>
    <li><span class="method">methodImplementor:</span></li>
    <li><span class="method">classPropertyNames</span></li>
    <li><span class="method">allClassPropertyNames</span></li>
    <li><span class="method">classMethods</span></li>
    <li><span class="method">allClassMethods</span></li>
</ul>

<p>For more information, see the details in the <a href="reference.html">FSClass reference page</a>.</p>


<h2><a name="objectivec"/>Using FSClass classes in Objective-C</h2>
<p>Because classes created with FSClass are full participants in the Cocoa runtime system, they can be used from pre-compiled Objective-C code, although a little bit of indirection is needed. Say that we have created a FSClass named <span class="class">Foobarizer</span>. The following code will get a reference to the class and create a new instance of it:</p>

<!--
  // We can't actually use the class name 'Foobarizer' because
  // the compiler will complain that it is undefined
  Class FoobarizerClass = NSClassFromString(@"Foobarizer");

  // Create an instance - we have to pass an object as argument, not a plain int
  id fooInstance = [FoobarizerClass foobarizerWithFoo:[NSNumber numberWithInt:10]];

  // this line will produce a compiler warning that -foobarize: is undefined
  id result = [fooInstance foobarize:@"a string"];

  // we can also run methods indirectly
  [fooInstance performSelector:@sel(setFoo:) withObject:[NSNumber numberWithInt:27]];
-->
<div class="longexample">
<pre class="textmate-source mac_classic"><span class="source source_objc"><span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_c">//</span> We can't actually use the class name 'Foobarizer' because
</span><span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_c">//</span> the compiler will complain that it is undefined
</span><span class="storage storage_type storage_type_objc">Class</span> <span class="storage storage_type storage_type_objc">FoobarizerClass</span> <span class="operator operator_assignment operator_assignment_c">=</span> <span class="support support_function support_function_cocoa">NSClassFromString</span><span class="punctuation punctuation_pairing punctuation_pairing_c">(</span><span class="string string_quoted string_quoted_double string_quoted_double_objc">@"Foobarizer"</span><span class="punctuation punctuation_pairing punctuation_pairing_c">)</span><span class="punctuation punctuation_c">;</span>

<span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_c">//</span> Create an instance - we have to pass an object as argument, not a plain int
</span><span class="storage storage_type storage_type_objc">id</span> fooInstance <span class="operator operator_assignment operator_assignment_c">=</span> <span class="punctuation punctuation_pairing punctuation_pairing_c">[</span><span class="storage storage_type storage_type_objc">FoobarizerClass</span> foobarizerWithFoo<span class="operator operator_boolean operator_boolean_c">:</span><span class="punctuation punctuation_pairing punctuation_pairing_c">[</span><span class="support support_class support_class_cocoa">NSNumber</span> numberWithInt<span class="operator operator_boolean operator_boolean_c">:</span><span class="constant constant_numeric constant_numeric_c">10</span><span class="punctuation punctuation_pairing punctuation_pairing_c">]]</span><span class="punctuation punctuation_c">;</span>

<span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_c">//</span> this line will produce a compiler warning that -foobarize: is undefined
</span><span class="storage storage_type storage_type_objc">id</span> result <span class="operator operator_assignment operator_assignment_c">=</span> <span class="punctuation punctuation_pairing punctuation_pairing_c">[</span>fooInstance foobarize<span class="operator operator_boolean operator_boolean_c">:</span><span class="string string_quoted string_quoted_double string_quoted_double_objc">@"a string"</span><span class="punctuation punctuation_pairing punctuation_pairing_c">]</span><span class="punctuation punctuation_c">;</span>

<span class="comment comment_line comment_line_double-slash comment_line_double-slash_c++"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_c">//</span> we can also run methods indirectly
</span><span class="punctuation punctuation_pairing punctuation_pairing_c">[</span>fooInstance performSelector<span class="operator operator_boolean operator_boolean_c">:</span>@<span class="entity entity_function entity_function_invocation entity_function_invocation_c">sel</span><span class="punctuation punctuation_pairing punctuation_pairing_c">(</span>setFoo<span class="operator operator_boolean operator_boolean_c">:</span><span class="punctuation punctuation_pairing punctuation_pairing_c">)</span> withObject<span class="operator operator_boolean operator_boolean_c">:</span><span class="punctuation punctuation_pairing punctuation_pairing_c">[</span><span class="support support_class support_class_cocoa">NSNumber</span> numberWithInt<span class="operator operator_boolean operator_boolean_c">:</span><span class="constant constant_numeric constant_numeric_c">27</span><span class="punctuation punctuation_pairing punctuation_pairing_c">]]</span><span class="punctuation punctuation_c">;</span>
</span></pre></div>

<p>If you use FSClass objects inside Objective-C, remember that all FSClass method parameters are objects. You will have to wrap numbers and other primitives inside <span class="class">NSNumber</span> or other classes if you wish to use them as arguments; the automatic conversion of the F-Script runtime is not available.</p>

<p>Also note that XCode will likely complain that it cannot find declarations of the methods that you use with the FSClass-derived class, unless they happen to already be implemented by another class. These warnings are annoying, but will not affect the functioning of the program (of course, if you did misspell a method name, your program will crash at runtime!) In the warning message, XCode will also say it is assuming that the return and argument types are all <span class="code">id</span>, which in this case is accurate.</p>




<h2><a name="reference"/>Reference</h2>
<p>A complete reference to all FSClass methods is available <a href="reference.html">here</a>.</p>




<h2><a name="download"/>Download</h2>
<p>Download the source code and compiled framework for FSClass <a href="http://pages.cs.wisc.edu/~weinrich/projects/FSClass/">here</a>.</p>




<h2><a name="legal"/>Legal and Miscellany</h2>
<p>The FSClass bundle is copyright 2007-2008 Andrew Weinrich, and is released under the <a href="http://www.gnu.org/copyleft/gpl.html">GNU GPL version 2</a>. The full text of the license can be found in the file <span class="directory">COPYING</span>, included in the source download.</p>

<p>Thanks to Phillipe Mougin for creating the <a href="http://www.fscript.org">F-Script language</a> and offering advice and assistance. Thanks also to everyone in the F-Script community who reported bugs in earlier versions.</p>

<p>If you find FSClass useful, you may also be interested in the <a href="http://pages.cs.wisc.edu/~weinrich/projects/fscript/index.html">fscript Unix tool</a>, a command-line utility that runs F-Script programs and incorporates some useful additions for general-purpose scripting tasks. In particular, it has support for libraries that can be written with FSClass instead of Objective-C.</p>

<p>If you write a lot of F-Script code, you may find the experimental tool <a href="http://pages.cs.wisc.edu/~weinrich/projects/flint/index.html">flint</a> to be useful. <tt>flint</tt> is a type-checker and bug-finder for F-Script. It can find type problems, incorrect method names, use of uninitialized variables, and other problems in F-Script programs.</p>



<h2><a name="revision"/>Known Bugs</h2>
<p>None currently known.</p>
<ul>
  
</ul>



<h2><a name="revision"/>Revision History</h2>
<dl>
  <dt>2008-01-15</dt><dd>Version 3.0<ul>
    <li>Now requires Mac OS X 10.5 Leopard; for earlier versions, use FSClass 2.1</li>
    <li>Now requires F-Script 2.0; for earlier versions, use FSClass 2.1</li>
    <li>Now compatible with 64-bit PowerPC and x86</li>
    <li>Makes mandatory use of garbage collection</li>
    <li>Changed the API for superclass method invocation to fix bugs and accommodate the new <tt>super</tt> keyword</li>
    <li>Brand new internal architecture</li>
    <li>Class methods and properties are now correctly inherited</li>
    <li>Faster dispatching of class methods and class property access</li>
    <li>Proxies for Objective-C classes no longer need to be created; the class objects may be used directly</li>
    <li>Fixed problems with using fast-ivars classes in the fscript Unix interpreter</li>
    <li>The class method <tt>newInstance</tt> is now deprecated; use <tt>alloc init</tt> instead</li>
    <li>The methods <tt>parentClass</tt>, <tt>subClasses</tt>, <tt>className</tt>, and <tt>description</tt> have been removed in favor of the equivalent Foundation methods</li>
  </ul></dd>
  <dt>2007-09-20</dt><dd>Version 2.1<ul>
    <li>Fixed a crash when using FSClass in an interactive interpreter</li>
  </ul></dd>
  <dt>2007-08-16</dt><dd>Version 2.0<ul>
    <li>More efficient dispatching for methods with fewer than 5 parameters</li>
    <li>Fast-ivars: classes can optionally have packed instance properties with low-overhead access methods</li>
    <li>Ability to inherit from Objective-C classes other than NSObject</li>
    <li>Proxies for Objective-C classes that support categories written in F-Script</li>
    <li>Improved compatibility with GUI F-Script interpreter</li>
    <li>Added automated test suite (run script <code>runTest.pl</code> in the directory <span class="directory">test</span>; requires the <a href="http://pages.cs.wisc.edu/~weinrich/projects/fscript/index.html"><code>fscript</code></a> command-line interpreter)</li>
    <li>Various stability and bug fixes</li>
  </ul></dd>
  <dt>2007-02-07</dt><dd>Version 1.1<ul>
    <li>Rewrote documentation to place emphasis on class factory methods as idiom for creating objects</li>
    <li>Miscellaneous documentation fixes</li>
  </ul></dd>
  <dt>2007-01-18</dt><dd>Version 1.0<ul>
    <li>Initial release</li>
  </ul></dd>
</ul>

</body>
</html>
